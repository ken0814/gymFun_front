import{A as E,o as _,c as d,d as o,_ as F,a as g,r as I,H as A,N as $,e as l,w as c,F as v,br as w,S as m,f as j,bn as U,g as x,p as L,i as O,j as P,l as T,bo as h}from"./index.d7a63328.js";import{_ as q}from"./Modal.9246eb3c.js";import{_ as G}from"./Table.2c3d8d9f.js";import{_ as J}from"./Pagination.e745794a.js";import{_ as K}from"./Select.700b21da.js";import{a as Q,_ as R}from"./FormItem.a492f0db.js";import"./Popover.c1197af8.js";import"./Input.eef6d8b5.js";import"./Warning.c2dd6f55.js";const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},X=o("path",{d:"M5 10h14v2h2V6c0-1.1-.9-2-2-2h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20a2 2 0 0 0 2 2h7v-2H5V10zm0-4h14v2H5V6zm17.84 10.28l-.71.71l-2.12-2.12l.71-.71a.996.996 0 0 1 1.41 0l.71.71c.39.39.39 1.02 0 1.41zm-3.54-.7l2.12 2.12l-5.3 5.3H14v-2.12l5.3-5.3z",fill:"currentColor"},null,-1),Y=[X],Z=E({name:"EditCalendarOutlined",render:function(t,a){return _(),d("svg",W,Y)}});const p=u=>(L("data-v-a9e70123"),u=u(),O(),u),tt=p(()=>o("div",{class:"flex justify-content-space-between",id:"section01"},[o("h1",null,"\u5B78\u54E1\u7BA1\u7406")],-1)),et=p(()=>o("h1",null,"\u5831\u540D\u5BE9\u67E5",-1)),ot={class:"flex justify-content-flex-end",id:"btnSection"},st=P("\u9001\u51FA"),nt={id:"section02"},at=p(()=>o("thead",null,[o("tr",null,[o("th",null,"\u5B78\u54E1"),o("th",null,"\u5831\u540D\u8AB2\u7A0B"),o("th",null,"\u5831\u540D\u72C0\u614B"),o("th",null,"\u5BE9\u67E5")])],-1)),lt={key:1},ct=p(()=>o("td",{colspan:"4",style:{"text-align":"center"}},"\u6C92\u6709\u8AB2\u7A0B",-1)),ut=[ct],rt={__name:"Student",setup(u){const t=g({_id:"",status:[],courseName:"",studentName:"",showModal:!1,submitting:!1}),a=g([]),r=I(1),i=5,b=A(()=>a.slice(r.value*i-i,r.value*i)),y=[{label:"\u5BE9\u67E5\u901A\u904E",value:1},{label:"\u5BE9\u67E5\u9000\u56DE",value:2}],S=(n,e)=>{t._id=n,e>-1?(t.courseName=a[e].course.name,t.studentName=a[e].studentDocument.name):(t.status="",t.courseName="",t.studentName=""),t.idx=e,t.showModal=!0,t.submitting=!1},N=async()=>{t.submitting=!0;const n={status:t.status};try{const{data:e}=await w.patch("/users/history/"+t._id,n);console.log(e.result),console.log(a[t.idx].status),a[t.idx].status=e.result.status,m.fire({icon:"success",title:"\u6210\u529F",text:"\u6210\u529F\u9001\u51FA"}),t.status=null,t.showModal=!1}catch(e){m.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message}),t.showModal=!1}};return(async()=>{try{const{data:n}=await w.get("/users//register");a.push(...n.final)}catch(n){m.fire({icon:"error",title:"\u5931\u6557",text:n.isAxiosError&&n.response.data?n.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})(),(n,e)=>{const k=K,M=Q,f=T,V=R,C=q,H=$,z=G,B=J;return _(),d(v,null,[tt,l(C,{show:t.showModal,"onUpdate:show":e[1]||(e[1]=s=>t.showModal=s),"mask-closable":!0,preset:"card",style:{width:"500px"},id:"modal"},{default:c(()=>[et,l(V,{model:t,onSubmit:j(N,["prevent"])},{default:c(()=>[l(M,{path:"status",label:"\u5BE9\u67E5\u7D50\u679C"},{default:c(()=>[l(k,{value:t.status,"onUpdate:value":e[0]||(e[0]=s=>t.status=s),options:y,placeholder:"\u8ACB\u9078\u64C7"},null,8,["value"])]),_:1}),o("div",ot,[l(f,{color:"#D74B4B","attr-type":"submit"},{default:c(()=>[st]),_:1})])]),_:1},8,["model","onSubmit"])]),_:1},8,["show"]),o("div",nt,[l(z,{bordered:!1,"single-line":!1,id:"table"},{default:c(()=>[at,o("tbody",null,[a.length>0?(_(!0),d(v,{key:0},U(x(b),(s,D)=>(_(),d("tr",{key:s._id},[o("td",null,h(s.studentDocument.name),1),o("td",null,h(s.course.name),1),o("td",null,h(s.status===0?"\u5BE9\u67E5\u4E2D":s.status===1?"\u5831\u540D\u6210\u529F":s.status===2?"\u5831\u540D\u8ACB\u6C42\u9000\u56DE":""),1),o("td",null,[l(f,{color:"#475F77",onClick:_t=>S(s._id,D+(r.value-1)*i)},{default:c(()=>[l(H,{size:"25",color:"#fff",component:x(Z)},null,8,["component"])]),_:2},1032,["onClick"])])]))),128)):(_(),d("tr",lt,ut))])]),_:1})]),l(B,{page:r.value,"onUpdate:page":e[2]||(e[2]=s=>r.value=s),"page-count":Math.ceil(a.length/i)},null,8,["page","page-count"])],64)}}},bt=F(rt,[["__scopeId","data-v-a9e70123"]]);export{bt as default};
