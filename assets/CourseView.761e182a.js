import{_ as $,a as d,r as I,H as A,o as u,c as w,d as t,e as c,w as i,F as y,k as E,S as m,bm as F,bn as U,g as j,bq as b,bo as l,p as q,i as z,j as k,br as H,bs as L,bp as P,l as T}from"./index.d7a63328.js";import{_ as G}from"./Pagination.e745794a.js";import{_ as J}from"./Modal.9246eb3c.js";import"./Input.eef6d8b5.js";import"./Select.700b21da.js";import"./Popover.c1197af8.js";import"./Warning.c2dd6f55.js";const h=p=>(q("data-v-1df899fc"),p=p(),z(),p),K={class:"flex",id:"container"},O={id:"section01"},Q=h(()=>t("h1",null,"\u8AB2\u7A0B\u5217\u8868",-1)),R=h(()=>t("hr",null,null,-1)),W=["onClick"],X=["src"],Y=k("\u6C92\u6709\u8AB2\u7A0B"),Z={class:"flex D-column",id:"modal"},ee={class:"flex D-column align-items-flex-start",id:"modalSection01"},te=["src"],oe=h(()=>t("h2",null,"\u8AB2\u7A0B\u4ECB\u7D39",-1)),se={class:"flex",id:"btnSection"},ne=k("\u7ACB\u5373\u5831\u540D"),ae={__name:"CourseView",setup(p){const s=d([]),r=I(1),_=8,S=A(()=>s.slice(r.value*_-_,r.value*_)),e=d({_id:"",name:"",price:"",category:null,time:null,place:0,sell:!1,image:[],description:"",coachName:"",idx:-1,submitting:!1,showModal:!1}),g=d({course:"",status:0}),x=(n,o)=>{e._id=n,o>-1&&(e.name=s[o].name,e.price=s[o].price,e.category=s[o].category,e.time=s[o].time,e.place=s[o].place,e.sell=s[o].sell,e.description=s[o].description,e.image=s[o].image,e.coachName=s[o].profile.name),e.idx=o,e.showModal=!0,e.submitting=!1},C=async()=>{g.course=e._id.toString();try{await H.post("/registration",g),e.showModal=!1,m.fire({icon:"success",title:"\u6210\u529F",text:"\u5831\u540D\u6210\u529F"})}catch(n){e.showModal=!1,m.fire({icon:"error",title:"\u5931\u6557",text:n.response.data.message==="No auth token"?"\u767B\u5165\u5F8C\u624D\u80FD\u5831\u540D":n.isAxiosError&&n.response.data?n.response.data.message:"\u767C\u751F\u932F\u8AA4"})}};return(async()=>{try{const{data:n}=await E.get("/courses/");s.push(...n.result)}catch(n){m.fire({icon:"error",title:"\u5931\u6557",text:n.isAxiosError&&n.response.data?n.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})(),(n,o)=>{const f=L,v=P,M=F,N=G,B=T,V=J;return u(),w(y,null,[t("div",K,[t("div",O,[Q,R,c(M,{cols:"1 sm:2 md:3 lg:4",responsive:"screen"},{default:i(()=>[s.length>0?(u(!0),w(y,{key:0},U(j(S),(a,D)=>(u(),b(v,{key:a._id},{default:i(()=>[t("a",{onClick:ie=>x(a._id,D+(r.value-1)*_)},[c(f,null,{cover:i(()=>[t("img",{src:a.image},null,8,X)]),default:i(()=>[t("h2",null,l(a.name),1),t("h3",null,"\u904B\u52D5\u9805\u76EE: "+l(a.category),1),t("h3",null,"\u4E0A\u8AB2\u5730\u9EDE: "+l(a.place),1),t("h3",null,"\u4E0A\u8AB2\u6642\u6BB5: "+l(a.time),1),t("h3",null,"\u50F9\u9322: $ "+l(a.price)+" / \u5802",1)]),_:2},1024)],8,W)]),_:2},1024))),128)):(u(),b(v,{key:1},{default:i(()=>[c(f,null,{default:i(()=>[Y]),_:1})]),_:1}))]),_:1}),c(N,{page:r.value,"onUpdate:page":o[0]||(o[0]=a=>r.value=a),"page-count":Math.ceil(s.length/_)},null,8,["page","page-count"])])]),c(V,{show:e.showModal,"onUpdate:show":o[2]||(o[2]=a=>e.showModal=a),preset:"card",style:{width:"400px"}},{default:i(()=>[t("div",Z,[t("div",ee,[t("h1",null,l(e.name),1),t("img",{src:e.image},null,8,te),t("h3",null,"\u6559\u7DF4: "+l(e.coachName),1),t("h3",null,"\u8AB2\u7A0B\u5730\u9EDE: "+l(e.place),1),t("h3",null,"\u8AB2\u7A0B\u6642\u6BB5: "+l(e.time),1),t("h3",null,"\u8AB2\u7A0B\u50F9\u9322: $ "+l(e.price)+" / \u5802",1),oe,t("h4",null,l(e.description),1),t("div",se,[c(B,{color:"#D74B4B",onClick:o[1]||(o[1]=a=>C())},{default:i(()=>[ne]),_:1})])])])]),_:1},8,["show"])],64)}}},he=$(ae,[["__scopeId","data-v-1df899fc"]]);export{he as default};
