import{_ as B,a as p,o as d,c as w,d as t,e as c,w as l,F as b,k as M,S as u,bm as V,bn as D,bq as v,bo as i,p as I,i as $,j as y,bG as A,br as E,bp as F,l as j}from"./index.79e8a813.js";import{_ as q}from"./Modal.fc632277.js";import"./fade-in-scale-up.cssr.b81e8a5d.js";import"./Warning.3cbf2fdc.js";const m=r=>(I("data-v-425bb748"),r=r(),$(),r),G={class:"flex",id:"container"},L={id:"section01"},T=m(()=>t("h1",null,"\u8AB2\u7A0B\u5217\u8868",-1)),U=m(()=>t("hr",null,null,-1)),z=["onClick"],H=["src"],J=y("\u6C92\u6709\u8AB2\u7A0B"),K={class:"flex D-column",id:"modal"},O={class:"flex D-column align-items-flex-start",id:"modalSection01"},P=["src"],Q=y("\u7ACB\u5373\u5831\u540D"),R=m(()=>t("h2",null,"\u8AB2\u7A0B\u4ECB\u7D39",-1)),W={__name:"CourseView",setup(r){const n=p([]),e=p({_id:"",name:"",price:"",category:null,time:null,place:0,sell:!1,image:[],description:"",coachName:"",idx:-1,submitting:!1,showModal:!1}),h=p({course:"",status:0}),k=(o,s)=>{e._id=o,s>-1&&(e.name=n[s].name,e.price=n[s].price,e.category=n[s].category,e.time=n[s].time,e.place=n[s].place,e.sell=n[s].sell,e.description=n[s].description,e.image=n[s].image,e.coachName=n[s].profile.name),e.idx=s,e.showModal=!0,e.submitting=!1},x=async()=>{h.course=e._id.toString();try{await A.post("/registration",h),e.showModal=!1,u.fire({icon:"success",title:"\u6210\u529F",text:"\u5831\u540D\u6210\u529F"})}catch(o){e.showModal=!1,u.fire({icon:"error",title:"\u5931\u6557",text:o.response.data.message==="No auth token"?"\u767B\u5165\u5F8C\u624D\u80FD\u5831\u540D":o.isAxiosError&&o.response.data?o.response.data.message:"\u767C\u751F\u932F\u8AA4"})}};return(async()=>{try{const{data:o}=await M.get("/courses/");n.push(...o.result)}catch(o){u.fire({icon:"error",title:"\u5931\u6557",text:o.isAxiosError&&o.response.data?o.response.data.message:"\u767C\u751F\u932F\u8AA4"})}})(),(o,s)=>{const g=E,_=F,f=V,S=j,C=q;return d(),w(b,null,[t("div",G,[t("div",L,[T,U,c(f,{cols:"1 s:2 l:4",responsive:"screen"},{default:l(()=>[n.length>0?(d(!0),w(b,{key:0},D(n,(a,N)=>(d(),v(_,{key:a._id},{default:l(()=>[t("a",{onClick:Y=>k(a._id,N)},[c(g,null,{cover:l(()=>[t("img",{src:a.image},null,8,H)]),default:l(()=>[t("h3",null,i(a.name),1),t("h4",null,"\u904B\u52D5\u9805\u76EE: "+i(a.category),1),t("h4",null,"\u4E0A\u8AB2\u5730\u9EDE: "+i(a.place),1),t("h4",null,"\u4E0A\u8AB2\u6642\u6BB5: "+i(a.time),1),t("h4",null,"\u50F9\u9322: $ "+i(a.price)+" / \u5802",1)]),_:2},1024)],8,z)]),_:2},1024))),128)):(d(),v(_,{key:1},{default:l(()=>[c(g,null,{default:l(()=>[J]),_:1})]),_:1}))]),_:1})])]),c(C,{show:e.showModal,"onUpdate:show":s[1]||(s[1]=a=>e.showModal=a),preset:"card",style:{width:"800px"}},{default:l(()=>[t("div",K,[c(f,{cols:"s:1 xxl:2",responsive:"screen"},{default:l(()=>[c(_,null,{default:l(()=>[t("div",O,[t("h1",null,i(e.name),1),t("img",{src:e.image},null,8,P),t("h3",null,"\u6559\u7DF4: "+i(e.coachName),1),t("h3",null,"\u8AB2\u7A0B\u5730\u9EDE: "+i(e.place),1),t("h3",null,"\u8AB2\u7A0B\u6642\u6BB5: "+i(e.time),1),t("h3",null,"\u8AB2\u7A0B\u50F9\u9322: $ "+i(e.price)+" / \u5802",1),c(S,{color:"#D74B4B",onClick:s[0]||(s[0]=a=>x())},{default:l(()=>[Q]),_:1})])]),_:1}),c(_,null,{default:l(()=>[t("div",null,[R,t("h4",null,i(e.description),1)])]),_:1})]),_:1})])]),_:1},8,["show"])],64)}}},oe=B(W,[["__scopeId","data-v-425bb748"]]);export{oe as default};
